<!DOCTYPE html>
<html>
	<head>
  		<title>XP Maker</title>
  		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  		<meta charset="UTF-8">

  		<script src="{{ url_for('bower.static', filename='jquery/dist/jquery.min.js') }}"></script>
  		<script src="{{ url_for('bower.static', filename='vexflow/releases/vexflow-min.js') }}"></script>
  		<script src="{{ url_for('bower.static', filename='materialize/dist/js/materialize.min.js') }}"></script>
  		<script src="{{ url_for('bower.static', filename='abcjs/abcjs_editor_midi_3.1.3-min.js') }}"></script>
  		<script src="{{ url_for('static', filename='js/xpmaker.js') }}"></script>

  		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
  		<link rel="stylesheet" href="{{ url_for('bower.static', filename='materialize/dist/css/materialize.min.css') }}" media="all" type="text/css" />
  		<link rel="stylesheet" href="{{ url_for('static', filename='css/abcjs-midi.css') }}" media="all" type="text/css" />
  		<link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" media="all" type="text/css" />
  		<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  	</head>
  	<body class="indigo lighten-4">
  		<header><h1 class="center-align">Weird loop Maker</h1></header>
  		<main class="container">

  			<ul class="collapsible" data-collapsible="expandable">
  				<li>
  					<div class="collapsible-header"><i class="material-icons">hearing</i>Resulting Loop</div>
				    <div class="collapsible-body center-align white">
				  		<div id="xp_canvas" class="center-align" style="width: 100%; overflow: hidden; height: 400px;"></div>
				  		<div id="xp_midi"></div>
				  		<div id="xp_midi_dl"></div>
				  		<a href="#" onclick="toggle_xp_input_display()"><i class="material-icons">edit</i></a>
				  		<div class="input-field">
					  		<textarea name="xp" id="xp_input" style="display:none"></textarea>
					  	</div>
				    </div>
  				</li>
  				<li>
  					<div class="collapsible-header"><i class="material-icons">music_note</i>Matrix</div>
  					<div class="collapsible-body white">
  						<div class="row">
  							<div class="col m6">
  								<h4>Notes</h4>
		  						<form method="post" id="inputs">
									<div>Enter your notes here without regard for rhythm.</div>
									<script type="text/javascript">
										window.onload = function() {
											updateFields('notes');
											updateFields('rhythms');
										};

										function toggle_xp_input_display() {
											var xp_input = $('#xp_input');
											xp_input.toggle();
											xp_input.focus();
										};

										/*window.onresize = function(event) {
											do_resize();
										};

										window.onload = function() {
											do_resize();
										}*/

									</script>
									<div class="input-field">
									  	<textarea name="notes" id="notes_input" cols="80" rows="5" oninput="updateFields('notes')">F _A E ^G ^A ^G z</textarea>
									</div>
									<!-- HIDDEN : -->
								  	<textarea name="notes_translated" id="notes_translated" style="display:none;"></textarea>

									<div id="notes_canvas" style="width: 100px; overflow: hidden; height: 420.348px;"></div>
								</form>
							</div>
							<div class="col m6">
								<h4>Rhythm</h4>
								<form method="post" id="inputs">
					  			<div>Enter your rhythm here without regard for notes</div>
					  			<div class="input-field">
							  		<textarea name="rhythms" id="rhythms_input" cols="80" rows="5" oninput="updateFields('rhythms')">8 8 4 8 8 4</textarea>
							  	</div>
							  	<!-- HIDDEN -->
								<textarea name="rhythms_translated" id="rhythms_translated" style="display:none;"></textarea>
								<div class="img-responsive" id="rhythm_canvas" style="width: 100px; overflow: hidden; height: 420.348px;"></div>
							  	</form>
							</div>
						</div>
  					</div>
  				</li>
  				<li>
  					<div class="collapsible-header"><i class="material-icons">info</i>Info</div>
  					<div class="collapsible-body white">
  						<div class="input-field col m6">
				        	<input placeholder="Title" type="text" name="title" id="title_input" oninput="updateXP()">
				        	<label for="title_input">Title</label>
				        </div>

			  			<div class="input-field col m6">
			  				<input placeholder="Tempo" type="number" name="bpm" id="bpm_input" oninput="updateXP()">
			  				<label for="bpm_input">Tempo</label>
			  			</div>
  					</div>
  				</li>
  			</ul>
		 </main>
		 <footer class="footer-copyright indigo lighten-3">
	        	<div class="container white-text">
	        		Â© 2017 <a href="http://www.antoineguenet.com" class="white-text">Antoine Guenet</a>
	        	</div>
	      	</div>
		 </footer>
    
  	</body>
</html>